<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>طلب تشكيل لجنة - نظام إدارة المشتريات</title>
  <meta name="description" content="نموذج طلب تشكيل لجنة لفحص الأسعار والمواصفات الفنية">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/shared.css">
  <link rel="stylesheet" href="css/print.css">
  <style>
    /* Committee Formation Specific Styles */
    .committee-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
    }
    
    .document-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 50%;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .logo-inner {
      text-align: center;
      font-size: 12px;
      font-weight: 600;
      color: #667eea;
      line-height: 1.2;
    }
    
    .hospital-info {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    
    .info-badge {
      padding: 8px 16px;
      border-radius: 25px;
      font-weight: 500;
      font-size: 14px;
    }
    
    .yellow-bg {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    
    .gray-bg {
      background: #e9ecef;
      color: #495057;
      border: 1px solid #dee2e6;
    }
    
    .request-content {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border: 1px solid #e9ecef;
    }
    
    .request-description {
      background: #f8f9fa;
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      position: relative;
    }
    
    .request-description::before {
      content: '📝';
      position: absolute;
      top: -10px;
      right: 20px;
      background: white;
      padding: 0 10px;
      font-size: 20px;
    }
    
    .committee-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border-left: 5px solid #28a745;
    }
    
    .committee-member {
      display: flex;
      align-items: center;
      padding: 15px;
      margin: 10px 0;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e9ecef;
      transition: all 0.3s ease;
    }
    
    .committee-member:hover {
      background: #e3f2fd;
      border-color: #2196f3;
      transform: translateX(-5px);
    }
    
    .member-number {
      background: #667eea;
      color: white;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-left: 15px;
      flex-shrink: 0;
    }
    
    .member-role {
      background: #28a745;
      color: white;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 500;
      margin-right: 15px;
      flex-shrink: 0;
    }
    
    .member-role.chairman {
      background: #dc3545;
    }
    
    .approval-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border-left: 5px solid #ffc107;
    }
    
    .signature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .signature-card {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .signature-card:hover {
      background: #e3f2fd;
      border-color: #2196f3;
    }
    
    .signature-label {
      display: block;
      font-weight: 600;
      color: #495057;
      margin-bottom: 10px;
    }
    
    .stamp-area {
      border: 2px dashed #6c757d;
      border-radius: 8px;
      padding: 40px 20px;
      text-align: center;
      color: #6c757d;
      font-weight: 500;
      margin-top: 20px;
      background: #f8f9fa;
    }
    
    .controls-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    /* Enhanced form inputs */
    .enhanced-input {
      position: relative;
      margin-bottom: 20px;
    }
    
    .enhanced-input input,
    .enhanced-input textarea {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s ease;
      background: white;
    }
    
    .enhanced-input input:focus,
    .enhanced-input textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .enhanced-input.error input,
    .enhanced-input.error textarea {
      border-color: #dc3545;
      box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
    }
    
    .enhanced-input.success input,
    .enhanced-input.success textarea {
      border-color: #28a745;
      box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
    }
    
    .inline-input {
      display: inline-block;
      border: none;
      border-bottom: 2px solid #667eea;
      background: transparent;
      padding: 4px 8px;
      margin: 0 5px;
      font-weight: 600;
      color: #495057;
      min-width: 150px;
      text-align: center;
    }
    
    .inline-input:focus {
      outline: none;
      border-bottom-color: #28a745;
      background: rgba(40, 167, 69, 0.1);
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
      .committee-member {
        flex-direction: column;
        text-align: center;
        gap: 10px;
      }
      
      .member-number {
        margin: 0;
      }
      
      .member-role {
        margin: 0;
      }
      
      .signature-grid {
        grid-template-columns: 1fr;
      }
      
      .hospital-info {
        flex-direction: column;
        align-items: center;
      }
    }
    
    /* Print styles */
    @media print {
      .navbar, .controls-section {
        display: none !important;
      }
      
      body {
        background: white;
        font-size: 12pt;
      }
      
      .container {
        box-shadow: none;
        padding: 10px;
        margin: 0;
        max-width: none;
      }
      
      .committee-header,
      .request-content,
      .committee-section,
      .approval-section {
        box-shadow: none;
        break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <span class="nav-icon">🏥</span>
        نظام إدارة المشتريات
      </div>
      <ul class="nav-links">
        <li><a href="main.html">📋 النموذج الرئيسي</a></li>
        <li><a href="taw.html">📦 أمر التوريد</a></li>
        <li><a href="taf.html">💰 تفريغ الأسعار</a></li>
        <li><a href="mahdr.html">📝 المحضر</a></li>
        <li><a href="talab.html">📄 طلب الشراء</a></li>
        <li><a href="moka.html">📈 المقايسة</a></li>
        <li><a href="tash.html" class="active">👥 تشكيل لجنة</a></li>
        <li><a href="custom.html">📊 الضرائب</a></li>
      </ul>
      <div class="nav-login">
        <button class="btn-login" onclick="if(confirm('هل أنت متأكد من تسجيل الخروج؟')) window.location.href='index.html'" title="تسجيل الخروج">
          <span>🚪</span> تسجيل الخروج
        </button>
      </div>
      <div class="nav-toggle" onclick="toggleMenu()">
        <span>☰</span>
      </div>
    </div>
  </nav>

  <div class="container">
    <!-- Entity Configuration Section -->
    <div class="entity-config-section">
      <h3 class="entity-config-title">
        <span>🏥</span> إعدادات الجهة
      </h3>
      <div class="entity-inputs">
        <div class="enhanced-input">
          <label class="form-label">اسم الجهة:</label>
          <input type="text" id="entityName" class="form-control" placeholder="اسم الجهة" value="الإدارة الصحية بسمنود">
        </div>
        <div class="enhanced-input">
          <label class="form-label">القسم:</label>
          <input type="text" id="entityDepartment" class="form-control" placeholder="اسم القسم" value="إدارة العقود والمشتريات">
        </div>
      </div>
    </div>

    <!-- Print Header (hidden on screen, visible in print) -->
    <div class="print-header print-only" style="display: none;">
      <div class="print-entity-name">
        الإدارة الصحية بسمنود<br>
        إدارة العقود والمشتريات
      </div>
      <div class="print-page-title">
        طلب تشكيل لجنة
      </div>
      <div class="print-logo">
        <img src="images/logo.png" alt="شعار الجهة">
      </div>
    </div>

    <!-- Committee Content -->
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-spinner"></div>
      <p>جاري تحضير طلب تشكيل اللجنة...</p>
    </div>

    <!-- Committee Header -->
    <div class="committee-header">
      <div class="document-logo">
        <div class="logo-inner">
          مصر<br>العربية
        </div>
      </div>
      <h1 class="section-title">👥 طلب تشكيل لجنة</h1>
      <div class="hospital-info">
        <div class="info-badge yellow-bg">الادارة الصحية بسمنود</div>
        <div class="info-badge gray-bg">إدارة العقود والمشتريات</div>
      </div>
    </div>

    <!-- Request Content -->
    <div class="request-content">
      <div class="document-info-section">
        <div class="form-grid">
          <div class="enhanced-input">
            <label class="form-label">🏥 اسم :</label>
            <input type="text" id="hospitalName" class="form-control" value="الادارة الصحية بسمنود" required>
          </div>
          <div class="enhanced-input">
            <label class="form-label">📅 تاريخ الطلب:</label>
            <input type="date" id="requestDate" class="form-control" required>
          </div>
          <div class="enhanced-input">
            <label class="form-label">📋 نوع اللجنة:</label>
            <select id="committeeType" class="form-control" required>
              <option value="">اختر نوع اللجنة</option>
              <option value="فحص أسعار">فحص أسعار</option>
              <option value="فحص عينات">فحص عينات</option>
              <option value="استلام وتسليم">استلام وتسليم</option>
              <option value="فحص عروض">فحص عروض</option>
              <option value="تقييم أداء">تقييم أداء</option>
            </select>
          </div>
        </div>
      </div>

      <div class="request-description">
        <p><strong>السيد الدكتور مدير</strong> 
          <input type="text" class="inline-input" id="hospitalName2" value="الادارة الصحية بسمنود">
        </p>
        <p><strong>بعد التحية،</strong></p>
        <div class="enhanced-input">
          <textarea id="requestText" class="form-control" rows="6" placeholder="اكتب محتوى الطلب...">الرجاء التكرم من سيادتكم بالموافقة على تشكيل لجنة للتأكد من صحة ورقة الأسعار الواردة ببنود المقايسة، والتأكد من أنها أقل الأسعار ومطابقتها للمواصفات الفنية وأصل الصناعة، على أن تقع على اللجنة مسؤولية التحقق من الأسعار.</textarea>
        </div>
      </div>
    </div>

    <!-- Committee Section -->
    <div class="committee-section">
      <h3 class="section-title">👥 أعضاء اللجنة</h3>
      <p class="section-subtitle">وهذه اللجنة هي:</p>
      
      <div id="committeeMembers">
        <div class="committee-member">
          <div class="member-number">1</div>
          <div class="enhanced-input" style="flex: 1;">
            <input type="text" id="member1" class="form-control" placeholder="اسم رئيس اللجنة" required>
          </div>
          <div class="member-role chairman">رئيساً</div>
        </div>
        
        <div class="committee-member">
          <div class="member-number">2</div>
          <div class="enhanced-input" style="flex: 1;">
            <input type="text" id="member2" class="form-control" placeholder="اسم العضو الأول" required>
          </div>
          <div class="member-role">عضو</div>
        </div>
        
        <div class="committee-member">
          <div class="member-number">3</div>
          <div class="enhanced-input" style="flex: 1;">
            <input type="text" id="member3" class="form-control" placeholder="اسم العضو الثاني" required>
          </div>
          <div class="member-role">عضو</div>
        </div>
      </div>
      
      <div class="action-buttons" style="margin-top: 20px; justify-content: flex-start;">
        <button class="btn btn-sm btn-primary" onclick="committeeManager?.addMember?.()">+ إضافة عضو</button>
        <button class="btn btn-sm btn-secondary" onclick="committeeManager?.loadFromSystem?.()">📋 تحميل من النظام</button>
      </div>
    </div>

    <!-- Approval Section -->
    <div class="approval-section">
      <h3 class="section-title">✅ الاعتماد والموافقة</h3>
      
      <div class="approval-text">
        <p><strong>وتفضلوا بقبول فائق الاحترام</strong></p>
      </div>
      
      <div class="signature-grid">
        <div class="signature-card">
          <label class="signature-label">👨‍💼 مقدم الطلب</label>
          <div class="enhanced-input">
            <input type="text" id="submitterName" class="form-control" placeholder="اسم مقدم الطلب">
          </div>
          <div class="enhanced-input">
            <input type="text" id="submitterPosition" class="form-control" placeholder="المنصب">
          </div>
          <div class="signature-placeholder">التوقيع</div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">👩‍⚖️ المعتمد النهائي</label>
          <div class="enhanced-input">
            <input type="text" id="approverName" class="form-control" placeholder="اسم المعتمد">
          </div>
          <div class="enhanced-input">
            <input type="text" id="approverPosition" class="form-control" placeholder="المنصب">
          </div>
          <div class="signature-placeholder">التوقيع</div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">📅 بيانات الطلب</label>
          <div class="enhanced-input">
            <input type="date" id="submissionDate" class="form-control">
          </div>
          <div class="enhanced-input">
            <input type="text" id="requestNumber" class="form-control" placeholder="رقم الطلب">
          </div>
          <div class="stamp-area">
            🏥 ختم الجهة
          </div>
        </div>
      </div>
    </div>

    <!-- Signatures Section -->
    <div class="signatures-section">
      <h3 class="section-title">ลาย التوقيعات</h3>
      <div class="signature-grid">
        <div class="signature-card">
          <label class="signature-label">👨‍💼 مقدم الطلب</label>
          <div class="signature-placeholder">التوقيع</div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">👩‍⚖️ المعتمد النهائي</label>
          <div class="signature-placeholder">التوقيع</div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">📅 بيانات الطلب</label>
          <div class="stamp-area">
            🏥 ختم الجهة المختصة
          </div>
        </div>
      </div>
    </div>

    <!-- Print Stamp Area (hidden on screen, visible in print) -->
    <div class="print-stamp print-only" style="display: none;">
      🏥 ختم الجهة المختصة
    </div>

    <!-- Controls Section (moved to bottom) -->
    <div class="controls-section">
      <h3 class="section-title">🛠️ أدوات التحكم</h3>
      <div class="action-buttons">
        <button class="btn btn-primary btn-icon" onclick="committeeManager?.addMember?.()" title="إضافة عضو">
          <span>➕</span> إضافة عضو
        </button>
        <button class="btn btn-success btn-icon" onclick="committeeManager?.saveData?.()" title="حفظ البيانات">
          <span>💾</span> حفظ البيانات
        </button>
        <button class="btn btn-info btn-icon" onclick="committeeManager?.loadData?.()" title="تحميل البيانات">
          <span>📁</span> تحميل البيانات
        </button>
        <button class="btn btn-warning btn-icon" onclick="committeeManager?.clearForm?.()" title="مسح جميع البيانات">
          <span>🗑️</span> مسح الكل
        </button>
        <button class="btn btn-secondary btn-icon" onclick="window.print()" title="طباعة">
          <span>🖨️</span> طباعة
        </button>
      </div>
    </div>
  </div>

  <!-- DataLists -->
  <datalist id="staffList"></datalist>
  <datalist id="departmentsList"></datalist>

  <script src="js/data.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/tash.js"></script>


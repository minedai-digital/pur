<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>بيانات المورد للضرائب - نظام إدارة المشتريات</title>
  <meta name="description" content="نموذج بيانات المورد للهيئة العامة للضرائب وحساب قيمة الضريبة">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/shared.css">
  <style>
    /* Tax Information Specific Styles */
    .tax-header {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 30px;
      text-align: center;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(40, 167, 69, 0.3);
    }
    
    .document-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 50%;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .logo-inner {
      text-align: center;
      font-size: 12px;
      font-weight: 600;
      color: #28a745;
      line-height: 1.2;
    }
    
    .entity-info {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    
    .info-badge {
      padding: 8px 16px;
      border-radius: 25px;
      font-weight: 500;
      font-size: 14px;
    }
    
    .green-bg {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .blue-bg {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    
    .form-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border-left: 5px solid #28a745;
    }
    
    .section-icon {
      font-size: 24px;
      margin-left: 10px;
      vertical-align: middle;
    }
    
    .tax-calculation {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 2px solid #28a745;
      border-radius: 12px;
      padding: 25px;
      margin: 20px 0;
      position: relative;
    }
    
    .tax-calculation::before {
      content: '📈';
      position: absolute;
      top: -15px;
      right: 20px;
      background: white;
      padding: 5px 10px;
      font-size: 24px;
      border-radius: 50%;
      border: 2px solid #28a745;
    }
    
    .tax-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid #dee2e6;
      font-size: 16px;
    }
    
    .tax-row:last-child {
      border-bottom: none;
      font-weight: 700;
      font-size: 20px;
      color: #28a745;
      background: rgba(40, 167, 69, 0.1);
      padding: 20px;
      border-radius: 8px;
      margin-top: 15px;
    }
    
    .tax-label {
      font-weight: 600;
      color: #495057;
    }
    
    .tax-value {
      font-weight: 700;
      color: #28a745;
      background: white;
      padding: 8px 16px;
      border-radius: 20px;
      border: 2px solid #28a745;
    }
    
    .declaration-section {
      background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
      border: 2px solid #ffc107;
      border-radius: 12px;
      padding: 25px;
      margin: 30px 0;
      position: relative;
    }
    
    .declaration-section::before {
      content: '⚖️';
      position: absolute;
      top: -15px;
      right: 20px;
      background: white;
      padding: 5px 10px;
      font-size: 24px;
      border-radius: 50%;
      border: 2px solid #ffc107;
    }
    
    .signature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .signature-card {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .signature-card:hover {
      background: #e3f2fd;
      border-color: #2196f3;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }
    
    .stamp-area {
      border: 3px dashed #28a745;
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      color: #28a745;
      font-weight: 600;
      font-size: 18px;
      margin: 30px auto;
      max-width: 300px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    }
    
    .controls-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    /* Enhanced form styling */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .form-grid-half {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }
    
    .form-grid-third {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    
    .enhanced-input {
      position: relative;
      margin-bottom: 20px;
    }
    
    .enhanced-input input,
    .enhanced-input textarea,
    .enhanced-input select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s ease;
      background: white;
    }
    
    .enhanced-input input:focus,
    .enhanced-input textarea:focus,
    .enhanced-input select:focus {
      outline: none;
      border-color: #28a745;
      box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
    }
    
    .enhanced-input.error input,
    .enhanced-input.error textarea,
    .enhanced-input.error select {
      border-color: #dc3545;
      box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
    }
    
    .enhanced-input.success input,
    .enhanced-input.success textarea,
    .enhanced-input.success select {
      border-color: #28a745;
      box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
    }
    
    .input-addon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #6c757d;
      font-weight: 500;
      pointer-events: none;
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
      .form-grid,
      .form-grid-half,
      .form-grid-third {
        grid-template-columns: 1fr;
      }
      
      .signature-grid {
        grid-template-columns: 1fr;
      }
      
      .entity-info {
        flex-direction: column;
        align-items: center;
      }
      
      .tax-row {
        flex-direction: column;
        text-align: center;
        gap: 10px;
      }
    }
    
    /* Print styles */
    @media print {
      .navbar, .controls-section {
        display: none !important;
      }
      
      body {
        background: white;
        font-size: 11pt;
      }
      
      .container {
        box-shadow: none;
        padding: 10px;
        margin: 0;
        max-width: none;
      }
      
      .tax-header,
      .form-section,
      .declaration-section {
        box-shadow: none;
        break-inside: avoid;
      }
      
      .tax-calculation {
        border: 1px solid #000;
      }
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <span class="nav-icon">🏥</span>
        نظام إدارة المشتريات
      </div>
      <ul class="nav-links">
        <li><a href="main.html">📋 النموذج الرئيسي</a></li>
        <li><a href="taw.html">📦 أمر التوريد</a></li>
        <li><a href="taf.html">💰 تفريغ الأسعار</a></li>
        <li><a href="mahdr.html">📝 المحضر</a></li>
        <li><a href="talab.html">📄 طلب الشراء</a></li>
        <li><a href="moka.html">📈 المقايسة</a></li>
        <li><a href="tash.html">👥 تشكيل لجنة</a></li>
        <li><a href="custom.html" class="active">📊 الضرائب</a></li>
      </ul>
      <div class="nav-login">
        <button class="btn-login" onclick="logout()" title="تسجيل الخروج">
          <span>🚪</span> تسجيل الخروج
        </button>
      </div>
      <div class="nav-toggle" onclick="toggleMenu()">
        <span>☰</span>
      </div>
    </div>
  </nav>

  <div class="container">
    <!-- Entity Configuration Section -->
    <div class="entity-config-section">
      <h3 class="entity-config-title">
        <span>🏥</span> إعدادات الجهة
      </h3>
      <div class="entity-inputs">
        <div class="enhanced-input">
          <label class="form-label">اسم الجهة:</label>
          <input type="text" id="entityName" class="form-control" placeholder="اسم الجهة" value="الإدارة الصحية بسمنود">
        </div>
        <div class="enhanced-input">
          <label class="form-label">القسم:</label>
          <input type="text" id="entityDepartment" class="form-control" placeholder="اسم القسم" value="إدارة العقود والمشتريات">
        </div>
      </div>
    </div>

    <!-- Print Header (hidden on screen, visible in print) -->
    <div class="print-header print-only" style="display: none;">
      <div class="print-entity-name">
        الإدارة الصحية بسمنود<br>
        إدارة العقود والمشتريات
      </div>
      <div class="print-page-title">
        بيانات المورد للهيئة العامة للضرائب
      </div>
      <div class="print-logo">
        <img src="images/logo.png" alt="شعار الجهة">
      </div>
    </div>

    <!-- Tax Content -->
    <div class="tax-header">
      <div class="document-logo">
        <div class="logo-inner">
          المملكة العربية<br>السعودية
        </div>
      </div>
      <h1 class="section-title">📊 بيانات المورد للهيئة العامة للضرائب</h1>
      <div class="entity-info">
        <div class="info-badge green-bg">مستشفى الملك فهد المركزي بجازان</div>
        <div class="info-badge blue-bg">إدارة العقود والمشتريات</div>
        <div class="enhanced-input" style="max-width: 300px;">
          <input type="text" id="entityName" class="form-control" placeholder="اسم الجهة" value="مستشفى الملك فهد">
        </div>
      </div>
    </div>

    <!-- Supplier Information Section -->
    <div class="form-section">
      <h3 class="section-title">
        <span class="section-icon">🏢</span>بيانات المورد الأساسية
      </h3>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">🏢 اسم المورد / الشركة:</label>
          <input type="text" id="supplierName" class="form-control" placeholder="أدخل اسم المورد أو الشركة" required>
        </div>
        <div class="enhanced-input">
          <label class="form-label">🏷️ الاسم التجاري:</label>
          <input type="text" id="tradeName" class="form-control" placeholder="الاسم التجاري للمورد">
        </div>
      </div>
      <div class="form-grid-third">
        <div class="enhanced-input">
          <label class="form-label">📄 رقم السجل التجاري:</label>
          <input type="text" id="commercialNo" class="form-control" placeholder="رقم السجل التجاري">
        </div>
        <div class="enhanced-input">
          <label class="form-label">📊 رقم البطاقة الضريبية:</label>
          <input type="text" id="taxCardNo" class="form-control" placeholder="رقم البطاقة الضريبية" required>
        </div>
        <div class="enhanced-input">
          <label class="form-label">🆔 الرقم القومي / السجل المدني:</label>
          <input type="text" id="nationalId" class="form-control" placeholder="الرقم القومي أو السجل المدني">
        </div>
      </div>
    </div>

    <!-- Address Information Section -->
    <div class="form-section">
      <h3 class="section-title">
        <span class="section-icon">📍</span>بيانات العنوان
      </h3>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">🏠 العنوان الرئيسي:</label>
          <input type="text" id="address" class="form-control" placeholder="العنوان الرئيسي للمورد" required>
        </div>
        <div class="enhanced-input">
          <label class="form-label">🏫 العنوان الفرعي:</label>
          <input type="text" id="address2" class="form-control" placeholder="العنوان الفرعي (اختياري)">
        </div>
      </div>
      <div class="form-grid-third">
        <div class="enhanced-input">
          <label class="form-label">🏢 المحافظة:</label>
          <input type="text" id="governorate" class="form-control" placeholder="المحافظة">
        </div>
        <div class="enhanced-input">
          <label class="form-label">🏞️ المركز / المدينة:</label>
          <input type="text" id="city" class="form-control" placeholder="المركز أو المدينة">
        </div>
        <div class="enhanced-input">
          <label class="form-label">📦 الرمز البريدي:</label>
          <input type="text" id="postalCode" class="form-control" placeholder="الرمز البريدي">
        </div>
      </div>
    </div>

    <!-- Contact Information Section -->
    <div class="form-section">
      <h3 class="section-title">
        <span class="section-icon">📞</span>بيانات الاتصال
      </h3>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">📞 رقم الهاتف:</label>
          <input type="tel" id="phone" class="form-control" placeholder="رقم الهاتف">
        </div>
        <div class="enhanced-input">
          <label class="form-label">📱 رقم الموبايل:</label>
          <input type="tel" id="mobile" class="form-control" placeholder="رقم الموبايل">
        </div>
      </div>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">📧 البريد الإلكتروني:</label>
          <input type="email" id="email" class="form-control" placeholder="البريد الإلكتروني">
        </div>
        <div class="enhanced-input">
          <label class="form-label">📠 الفاكس:</label>
          <input type="text" id="fax" class="form-control" placeholder="رقم الفاكس">
        </div>
      </div>
    </div>

    <!-- Bank Information Section -->
    <div class="form-section">
      <h3 class="section-title">
        <span class="section-icon">🏦</span>بيانات الحساب البنكي
      </h3>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">🏦 اسم البنك:</label>
          <input type="text" id="bankName" class="form-control" placeholder="اسم البنك">
        </div>
        <div class="enhanced-input">
          <label class="form-label">🏬 فرع البنك:</label>
          <input type="text" id="bankBranch" class="form-control" placeholder="فرع البنك">
        </div>
      </div>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">💳 رقم الحساب:</label>
          <input type="text" id="accountNo" class="form-control" placeholder="رقم الحساب البنكي">
        </div>
        <div class="enhanced-input">
          <label class="form-label">🌍 رقم IBAN:</label>
          <input type="text" id="iban" class="form-control" placeholder="رقم الحساب الدولي IBAN">
        </div>
      </div>
    </div>

    <!-- Work & Value Section -->
    <div class="form-section">
      <h3 class="section-title">
        <span class="section-icon">💼</span>بيانات الأعمال والقيمة
      </h3>
      <div class="enhanced-input">
        <label class="form-label">📝 وصف الأعمال أو الخدمات المقدمة:</label>
        <textarea id="workDescription" class="form-control" rows="3" placeholder="وصف تفصيلي للأعمال أو الخدمات المقدمة"></textarea>
      </div>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">📄 رقم عقد التوريد:</label>
          <input type="text" id="contractNo" class="form-control" placeholder="رقم عقد التوريد">
        </div>
        <div class="enhanced-input">
          <label class="form-label">📅 تاريخ العقد:</label>
          <input type="date" id="contractDate" class="form-control">
        </div>
      </div>
      <div class="form-grid-half">
        <div class="enhanced-input">
          <label class="form-label">💰 قيمة الأعمال (قبل الضريبة):</label>
          <input type="number" id="workValue" class="form-control" placeholder="0.00" step="0.01" required>
          <span class="input-addon">ريال سعودي</span>
        </div>
        <div class="enhanced-input">
          <label class="form-label">📈 نسبة الضريبة (%):</label>
          <input type="number" id="taxRate" class="form-control" value="15" placeholder="15" step="0.01">
          <span class="input-addon">%</span>
        </div>
      </div>
    </div>

    <!-- Tax Calculation Section -->
    <div class="form-section">
      <h3 class="section-title">
        <span class="section-icon">🧮</span>حساب الضرائب
      </h3>
      <div class="tax-calculation">
        <div class="tax-row">
          <span class="tax-label">قيمة الأعمال الأساسية:</span>
          <span class="tax-value" id="baseValue">0.00 ريال سعودي</span>
        </div>
        <div class="tax-row">
          <span class="tax-label">ضريبة القيمة المضافة (<span id="taxRateDisplay">15</span>%):</span>
          <span class="tax-value" id="taxValue">0.00 ريال سعودي</span>
        </div>
        <div class="tax-row">
          <span class="tax-label">💵 الإجمالي شامل الضريبة:</span>
          <span class="tax-value" id="totalValue">0.00 ريال سعودي</span>
        </div>
      </div>
    </div>

    <!-- Declaration Section -->
    <div class="declaration-section">
      <h3 class="section-title">
        <span class="section-icon">⚖️</span>إقرار وتوقيع
      </h3>
      <div class="enhanced-input">
        <label class="form-label">📜 نص الإقرار:</label>
        <textarea id="declaration" class="form-control" rows="3" placeholder="نص الإقرار الرسمي">أقر أنا المورد الموقع أدناه بأن جميع البيانات المذكورة أعلاه صحيحة ودقيقة وأنني أتحمل المسؤولية القانونية عن أي خطأ في هذه البيانات.</textarea>
      </div>
      
      <div class="signature-grid">
        <div class="signature-card">
          <label class="signature-label">👨‍💼 الاسم الكامل</label>
          <div class="enhanced-input">
            <input type="text" id="fullName" class="form-control" placeholder="الاسم الكامل للمورد">
          </div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">✍️ التوقيع</label>
          <div class="enhanced-input">
            <input type="text" id="signature" class="form-control" placeholder="التوقيع">
          </div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">📅 التاريخ</label>
          <div class="enhanced-input">
            <input type="date" id="signatureDate" class="form-control">
          </div>
        </div>
        
        <div class="signature-card">
          <label class="signature-label">🏷️ الختم الرسمي</label>
          <div class="enhanced-input">
            <input type="text" id="officialStamp" class="form-control" placeholder="ختم الشركة أو المورد">
          </div>
        </div>
      </div>
    </div>

    <!-- Print Stamp Area (hidden on screen, visible in print) -->
    <div class="print-stamp print-only" style="display: none;">
      🏥 ختم الجهة المختصة
    </div>

    <!-- Controls Section (moved to bottom) -->
    <div class="controls-section">
      <h3 class="section-title">🛠️ أدوات التحكم</h3>
      <div class="action-buttons">
        <button class="btn btn-primary btn-icon" onclick="taxManager?.calculateTax?.()" title="حساب الضريبة">
          <span>🧮</span> حساب الضريبة
        </button>
        <button class="btn btn-success btn-icon" onclick="taxManager?.saveData?.()" title="حفظ البيانات">
          <span>💾</span> حفظ البيانات
        </button>
        <button class="btn btn-info btn-icon" onclick="taxManager?.loadData?.()" title="تحميل البيانات">
          <span>📁</span> تحميل البيانات
        </button>
        <button class="btn btn-warning btn-icon" onclick="taxManager?.clearForm?.()" title="مسح جميع البيانات">
          <span>🗑️</span> مسح الكل
        </button>
        <button class="btn btn-secondary btn-icon" onclick="window.print()" title="طباعة">
          <span>🖨️</span> طباعة
        </button>
      </div>
    </div>
  </div>

  <!-- DataLists -->
  <datalist id="suppliersList"></datalist>
  <datalist id="banksList"></datalist>

  <script src="js/data.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/custom.js"></script>


<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>الإعدادات الأساسية للنظام</title>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Lateef&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Cairo', 'Lateef', Arial, sans-serif; background: #f5fbfd; margin: 0; min-height: 100vh;}
    .container { max-width: 600px; margin: 45px auto; background: #fff; border-radius: 16px; box-shadow: 0 0 17px #e0e6ee; padding: 2.3rem 2rem;}
    h1 {font-family: 'Amiri', serif; font-size: 2rem; color: #204060; text-align: center; margin-bottom: 1.7rem;}
    .notif { display:none; margin-bottom: 18px; border-radius: 7px; padding: 12px; background: #d9f3da; color: #00796b; text-align: center; font-size: 1.08rem;}
    label { font-weight: 700; display:block; margin-bottom:9px; font-size:1.07rem; text-align:right; }
    input, textarea { width: 100%; padding: 11px 9px; border-radius: 9px; border: 1.5px solid #afddea; margin-bottom: 14px; font-family: 'Lateef', 'Cairo', Arial; font-size: 1.09rem; background: #f8fafb; transition: border 0.2s, box-shadow 0.2s;}
    input:focus, textarea:focus { border-color: #2196f3; box-shadow: 0 0 0 2px #c8f4ec44; outline: none; background: #f1faff;}
    button { background: linear-gradient(90deg,#156ab2 0,#18b393 100%); color: #fff; width:100%; border:none; border-radius:9px; font-size:1.11rem; font-weight:bold; padding:12px; margin-top:7px; cursor:pointer; box-shadow:0 2px 10px #61dede36; transition:background .16s,transform.12s;}
    button:hover,button:focus {background:linear-gradient(90deg,#2f90fc 0,#31c292 100%); transform:scale(1.03);}
    .signatures-list {margin-bottom:18px;}
    .sign-entry {display:flex; gap:10px; margin-bottom:10px;}
    .sign-entry input {flex:1;}
    .sign-entry .desc-input {flex:2;}
    .sign-entry button {width:auto; font-size:1.07rem; background: #f75c5c; padding:7px 11px;}
    .sign-entry button:hover{background:#ae2323;}
    .app-btn {background: linear-gradient(90deg, #215f9d 0%, #38a56a 100%)!important; margin-top:13px; font-size:1.14rem;}
    .app-btn:hover{background:linear-gradient(90deg,#1792f6 0%,#12ae71 100%)!important;}
  </style>
</head>
<body>
  <div class="container">
    <h1>الإعدادات الأساسية للنظام</h1>
    <div class="notif" id="notif"></div>
    <label for="hospital">اسم المكان (المستشفى أو المؤسسة):</label>
    <input type="text" id="hospital" placeholder="أدخل اسم المكان">

    <div class="signatures-list" id="signaturesList">
      <label>أصحاب التوقيع (يرجى كتابة الاسم والصفة لكل شخص):</label>
    </div>
    <button onclick="addSignatureEntry()">إضافة توقيع جديد +</button>
    <button onclick="saveSettings()">حفظ البيانات</button>
    <!-- زر النقل للصفحة الرئيسية للتطبيق -->
    <button type="button" class="app-btn" onclick="goToMain()">دخول التطبيق</button>
  </div>
  <script>
    window.onload = function() {
      document.getElementById('hospital').value = localStorage.getItem('hospitalName') || '';
      let sigs = [];
      try { sigs = JSON.parse(localStorage.getItem('signaturesArray')) || []; } catch{}
      sigs.forEach(sig => addSignatureEntry(sig.name, sig.desc));
      if (sigs.length === 0) addSignatureEntry();
    };
    function addSignatureEntry(name="", desc="") {
      var d = document.createElement("div");
      d.className = "sign-entry";
      d.innerHTML = `
        <input type="text" class="name-input" placeholder="الاسم" value="${name||""}">
        <input type="text" class="desc-input" placeholder="الصفة/الوصف" value="${desc||""}">
        <button type="button" onclick="this.parentNode.remove()">−</button>`;
      document.getElementById('signaturesList').appendChild(d);
    }
    function saveSettings() {
      let hospital = document.getElementById('hospital').value.trim();
      let entries = document.querySelectorAll('.sign-entry');
      let sigs = [];
      entries.forEach(entry => {
        let name = entry.querySelector('.name-input').value.trim();
        let desc = entry.querySelector('.desc-input').value.trim();
        if(name && desc) sigs.push({name, desc});
      });
      if(!hospital) {showNotif('يرجى إدخال اسم المكان الرئيسي'); return;}
      if(!sigs.length) {showNotif('يرجى إدخال توقيع واحد على الأقل (اسم + صفة)'); return;}
      localStorage.setItem('hospitalName', hospital);
      localStorage.setItem('signaturesArray', JSON.stringify(sigs));
      showNotif('✅ تم الحفظ! ستظهر بياناتك في جميع صفحات النظام');
    }
    function goToMain() {
      window.location.href = 'main.html';
    }
    function showNotif(msg){
      let n = document.getElementById('notif');
      n.innerText = msg; n.style.display = "block";
      setTimeout(()=>{ n.style.display="none"; }, 1700);
    }
  </script>
</body>
</html>

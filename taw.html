<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø£Ù…Ø± Ø§Ù„ØªÙˆØ±ÙŠØ¯ - taw</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Cairo', sans-serif; margin:0; background:#f0f2f5; color:#333; }
  header { background:#007bff; color:#fff; padding:15px; text-align:center; font-size:22px; font-weight:bold; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
  .container { max-width:1200px; margin:20px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
  h1.title { text-align:center; font-size:28px; margin-bottom:20px; font-weight:bold; }
  .supplier-info, .footer-inputs { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:15px; margin-bottom:20px; }
  .supplier-info label, .footer-inputs label { display:flex; flex-direction:column; font-weight:600; font-size:14px; }
  .supplier-info input, .footer-inputs input { padding:7px; border:1px solid #ccc; border-radius:6px; margin-top:5px; }
  table { width:100%; border-collapse:collapse; margin-top:20px; background:#fff; border-radius:8px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
  th, td { border:1px solid #e5e5e5; padding:10px; text-align:center; font-size:14px; }
  th { background:#f8f9fa; font-weight:600; }
  tfoot td { font-weight:bold; background:#f1f3f5; }
  button { padding:10px 18px; border:none; border-radius:6px; margin:5px; cursor:pointer; font-size:14px; font-weight:bold; transition:0.2s; }
  button:hover { opacity:0.85; }
  .add { background:#007bff; color:#fff; }
  .clear { background:#dc3545; color:#fff; }
  .save { background:#17a2b8; color:#fff; }
  .load { background:#6f42c1; color:#fff; }
  .print { background:#28a745; color:#fff; }
</style>
</head>


<!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø£Ø³ÙÙ„ ÙˆØ³Ù… <body> Ù…Ø¨Ø§Ø´Ø±Ø© Ù‚Ø¨Ù„ <header> -->
<nav class="navbar">
  <div class="nav-container">
    <div class="nav-logo"> ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
    <ul class="nav-links">
      <li><a href="main.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a href="taw.html">Ø§Ù„ØªÙˆØ±ÙŠØ¯</a></li>
      <li><a href="taf.html">ØªÙØ±ÙŠØº</a></li>
      <li><a href="mahdr.html">Ù…Ø­Ø¶Ø±</a></li>
      <li><a href="talab.html">Ø·Ù„Ø¨</a></li>
      <li><a href="moka.html">Ù…Ù‚Ø§ÙŠØ³Ù‡</a></li>
      <li><a href="tash.html">ØªØ´ÙƒÙŠÙ„</a></li>
      <li><a href="custom.html">Ø§Ù„Ø¶Ø±Ø§ÙŠØ¨</a></li>
    </ul>
    <div class="nav-toggle" onclick="toggleMenu()">â˜°</div>
  </div>
</nav>

<style>
/* Navbar Ø£Ø³Ø§Ø³ÙŠ */
.navbar {
  background-color: #007bff;
  color: #fff;
  font-family: 'Cairo', sans-serif;
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.nav-container {
  max-width: 1200px;
  margin: auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
}

.nav-logo {
  font-size: 20px;
  font-weight: bold;
}

.nav-links {
  list-style: none;
  display: flex;
  gap: 15px;
  margin: 0;
  padding: 0;
}

.nav-links li a {
  color: #fff;
  text-decoration: none;
  font-weight: 600;
  padding: 8px 12px;
  border-radius: 6px;
  transition: background 0.2s;
}

.nav-links li a:hover {
  background-color: rgba(255,255,255,0.2);
}

.nav-toggle {
  display: none;
  font-size: 24px;
  cursor: pointer;
}

/* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 768px) {
  .nav-links {
    display: none;
    flex-direction: column;
    gap: 10px;
    background-color: #007bff;
    padding: 10px 0;
  }
  .nav-links.active {
    display: flex;
  }
  .nav-toggle {
    display: block;
  }
}
</style>

<script>
function toggleMenu() {
  document.querySelector('.nav-links').classList.toggle('active');
}
</script>










<body>

<header>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµØ­ÙŠØ©</header>

<div class="container">
  <h1 class="title">Ø£Ù…Ø± Ø§Ù„ØªÙˆØ±ÙŠØ¯</h1>

  <div class="supplier-info">
    <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯: <input list="suppliersList" id="supplierName"></label>
    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ±Ø¯: <input type="text" id="supplierAddress"></label>
    <label>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†: <input type="text" id="supplierPhone"></label>
    <label>ØªØ§Ø±ÙŠØ®: <input type="date" id="orderDate"></label>
    <label>Ø±Ù‚Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ: <input type="text" id="taxId"></label>
  </div>

  <table id="itemsTable">
    <thead>
      <tr>
        <th>Ù…</th>
        <th>Ø§Ù„ØµÙ†Ù</th>
        <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
        <th>Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>
        <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
        <th>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
        <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
        <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
        <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td colspan="7">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</td>
        <td id="grandTotal">0</td>
        <td colspan="2"></td>
      </tr>
    </tfoot>
  </table>

  <div class="footer-inputs">
    <label>Ø§Ù„Ù…Ø®ØªØµ: <input list="staffList" id="officer"></label>
    <label>Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù…: <input list="staffList" id="head"></label>
    <label>ÙŠØ¹ØªÙ…Ø¯: <input list="staffList" id="approved"></label>
  </div>

  <div style="text-align:center; margin-top:20px;">
    <button class="add" onclick="addRow()">â• Ø¥Ø¶Ø§ÙØ© ØµÙ</button>
    <button class="clear" onclick="clearTable()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
    <button class="save" onclick="saveData()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    <button class="load" onclick="loadData()">ğŸ“‚ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    <button class="print" onclick="printPage()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
  </div>
</div>

<!-- datalists -->
<datalist id="suppliersList"></datalist>
<datalist id="itemsList"></datalist>
<datalist id="staffList"></datalist>

<script src="data.js"></script>
<script>
let rowCount=0;

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† data.js
Object.keys(suppliers).forEach(name=>{
  let opt=document.createElement('option'); opt.value=name;
  document.getElementById('suppliersList').appendChild(opt);
});

Object.keys(itemsDB).forEach(item=>{
  let opt=document.createElement('option'); opt.value=item;
  document.getElementById('itemsList').appendChild(opt);
});

staffDB.forEach(staff=>{
  let opt=document.createElement('option'); opt.value=staff;
  document.getElementById('staffList').appendChild(opt);
});

function addRow(item='', unit='', qty=0, price=0, note=''){
  rowCount++;
  const tbody=document.querySelector("#itemsTable tbody");
  const tr=document.createElement("tr");
  const totalBeforeTax=(qty*price).toFixed(2);
  const tax=(totalBeforeTax*0.15).toFixed(2);
  const totalAfterTax=(parseFloat(totalBeforeTax)+parseFloat(tax)).toFixed(2);

  tr.innerHTML=`
    <td>${rowCount}</td>
    <td><input list="itemsList" value="${item}" oninput="fillUnit(this)"></td>
    <td><input type="text" value="${unit}"></td>
    <td><input type="number" value="${qty}" oninput="updateRow(this)"></td>
    <td><input type="number" value="${price}" oninput="updateRow(this)"></td>
    <td class="beforeTax">${totalBeforeTax}</td>
    <td class="tax">${tax}</td>
    <td class="afterTax">${totalAfterTax}</td>
    <td><input type="text" value="${note}"></td>
    <td><button onclick="removeRow(this)">Ù…Ø³Ø­</button></td>
  `;
  tbody.appendChild(tr);
  updateGrandTotal();
}

function fillUnit(input){
  const val=input.value;
  if(itemsDB[val]){
    input.parentElement.nextElementSibling.querySelector('input').value=itemsDB[val].unit;
  }
}

function updateRow(input){
  const tr=input.closest('tr');
  const qty=parseFloat(tr.cells[3].querySelector('input').value)||0;
  const price=parseFloat(tr.cells[4].querySelector('input').value)||0;
  const beforeTax=(qty*price).toFixed(2);
  const tax=(beforeTax*0.15).toFixed(2);
  const afterTax=(parseFloat(beforeTax)+parseFloat(tax)).toFixed(2);
  tr.querySelector('.beforeTax').textContent=beforeTax;
  tr.querySelector('.tax').textContent=tax;
  tr.querySelector('.afterTax').textContent=afterTax;
  updateGrandTotal();
}

function updateGrandTotal(){
  let total=0;
  document.querySelectorAll('.afterTax').forEach(td=>{total+=parseFloat(td.textContent)||0;});
  document.getElementById('grandTotal').textContent=total.toFixed(2);
}

function removeRow(btn){btn.closest('tr').remove(); updateGrandTotal();}
function clearTable(){document.querySelector("#itemsTable tbody").innerHTML=""; rowCount=0; updateGrandTotal();}

// ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ ØªÙ… Ø­ÙØ¸Ù‡Ø§ Ù…Ù† main
window.onload=function(){
  const savedData=localStorage.getItem('mainFormData');
  if(savedData){
    const data=JSON.parse(savedData);
    document.getElementById('supplierName').value=data.supplier1||'';
    document.getElementById('supplierAddress').value=data.supplierAddress||'';
    document.getElementById('supplierPhone').value=data.supplierPhone||'';
    document.getElementById('orderDate').value=data.date||'';
    document.getElementById('taxId').value=data.taxId||'';
    document.getElementById('officer').value=data.officer||'';
    document.getElementById('head').value=data.head||'';
    document.getElementById('approved').value=data.approved||'';
  }
}

function saveData(){
  const data={
    supplierName:document.getElementById('supplierName').value,
    supplierAddress:document.getElementById('supplierAddress').value,
    supplierPhone:document.getElementById('supplierPhone').value,
    orderDate:document.getElementById('orderDate').value,
    taxId:document.getElementById('taxId').value,
    officer:document.getElementById('officer').value,
    head:document.getElementById('head').value,
    approved:document.getElementById('approved').value,
    table:[]
  };
  document.querySelectorAll('#itemsTable tbody tr').forEach(tr=>{
    const row=[];
    tr.querySelectorAll('input').forEach(inp=>row.push(inp.value));
    data.table.push(row);
  });
  const fileName=`${data.orderDate}_${data.supplierName}.json`;
  const blob=new Blob([JSON.stringify(data)],{type:"application/json"});
  const link=document.createElement('a');
  link.href=URL.createObjectURL(blob);
  link.download=fileName;
  link.click();
}

function loadData(){
  const input=document.createElement('input');
  input.type='file'; input.accept='.json';
  input.onchange=e=>{
    const file=e.target.files[0];
    const reader=new FileReader();
    reader.onload=ev=>{
      const data=JSON.parse(ev.target.result);
      document.getElementById('supplierName').value=data.supplierName||'';
      document.getElementById('supplierAddress').value=data.supplierAddress||'';
      document.getElementById('supplierPhone').value=data.supplierPhone||'';
      document.getElementById('orderDate').value=data.orderDate||'';
      document.getElementById('taxId').value=data.taxId||'';
      document.getElementById('officer').value=data.officer||'';
      document.getElementById('head').value=data.head||'';
      document.getElementById('approved').value=data.approved||'';
      clearTable();
      data.table.forEach(row=>addRow(...row));
    };
    reader.readAsText(file);
  };
  input.click();
}

function printPage(){window.print();}
</script>

</body>
</html>

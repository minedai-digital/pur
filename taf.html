<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªÙØ±ÙŠØº Ø§Ù„Ø£Ø³Ø¹Ø§Ø± - taf</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Cairo', sans-serif; margin:0; background:#f0f2f5; color:#333; }
  header { background:#007bff; color:#fff; padding:15px; text-align:center; font-size:22px; font-weight:bold; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
  .container { max-width:1400px; margin:20px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
  h1.title { text-align:center; font-size:28px; margin-bottom:20px; font-weight:bold; }
  table { width:100%; border-collapse:collapse; margin-top:20px; background:#fff; border-radius:8px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
  th, td { border:1px solid #e5e5e5; padding:8px; text-align:center; font-size:14px; }
  th { background:#f8f9fa; font-weight:600; }
  tfoot td { font-weight:bold; background:#f1f3f5; }
  .highlight { background-color:#d4edda !important; }
  .footer-inputs, .top-inputs { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:15px; margin-top:20px; }
  .footer-inputs label, .top-inputs label { display:flex; flex-direction:column; font-weight:600; }
  input { padding:7px; border:1px solid #ccc; border-radius:6px; margin-top:5px; }
  button { padding:10px 18px; border:none; border-radius:6px; margin:5px; cursor:pointer; font-size:14px; font-weight:bold; transition:0.2s; }
  button:hover { opacity:0.85; }
  .print { background:#28a745; color:#fff; }
  .add { background:#007bff; color:#fff; }
  .clear { background:#dc3545; color:#fff; }
  @media(max-width:1024px){table, th, td{font-size:12px;}}
  @media(max-width:768px){.footer-inputs, .top-inputs{grid-template-columns:1fr;}}
</style>
</head>



<!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø£Ø³ÙÙ„ ÙˆØ³Ù… <body> Ù…Ø¨Ø§Ø´Ø±Ø© Ù‚Ø¨Ù„ <header> -->
<nav class="navbar">
  <div class="nav-container">
    <div class="nav-logo"> ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
    <ul class="nav-links">
      <li><a href="main.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a href="taw.html">Ø§Ù„ØªÙˆØ±ÙŠØ¯</a></li>
      <li><a href="taf.html">ØªÙØ±ÙŠØº</a></li>
      <li><a href="mahdr.html">Ù…Ø­Ø¶Ø±</a></li>
      <li><a href="talab.html">Ø·Ù„Ø¨</a></li>
      <li><a href="moka.html">Ù…Ù‚Ø§ÙŠØ³Ù‡</a></li>
      <li><a href="tash.html">ØªØ´ÙƒÙŠÙ„</a></li>
      <li><a href="custom.html">Ø§Ù„Ø¶Ø±Ø§ÙŠØ¨</a></li>
    </ul>
    <div class="nav-toggle" onclick="toggleMenu()">â˜°</div>
  </div>
</nav>

<style>
/* Navbar Ø£Ø³Ø§Ø³ÙŠ */
.navbar {
  background-color: #007bff;
  color: #fff;
  font-family: 'Cairo', sans-serif;
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.nav-container {
  max-width: 1200px;
  margin: auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
}

.nav-logo {
  font-size: 20px;
  font-weight: bold;
}

.nav-links {
  list-style: none;
  display: flex;
  gap: 15px;
  margin: 0;
  padding: 0;
}

.nav-links li a {
  color: #fff;
  text-decoration: none;
  font-weight: 600;
  padding: 8px 12px;
  border-radius: 6px;
  transition: background 0.2s;
}

.nav-links li a:hover {
  background-color: rgba(255,255,255,0.2);
}

.nav-toggle {
  display: none;
  font-size: 24px;
  cursor: pointer;
}

/* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 768px) {
  .nav-links {
    display: none;
    flex-direction: column;
    gap: 10px;
    background-color: #007bff;
    padding: 10px 0;
  }
  .nav-links.active {
    display: flex;
  }
  .nav-toggle {
    display: block;
  }
}
</style>

<script>
function toggleMenu() {
  document.querySelector('.nav-links').classList.toggle('active');
}
</script>








<body>

<header>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµØ­ÙŠØ©</header>

<div class="container">
  <h1 class="title">ØªÙØ±ÙŠØº Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</h1>

  <div class="top-inputs">
    <label>ØªØ§Ø±ÙŠØ®: <input type="date" id="orderDate"></label>
  </div>

  <div style="text-align:center; margin-bottom:10px;">
    <button class="add" onclick="addEmptyRow()">â• Ø¥Ø¶Ø§ÙØ© ØµÙ</button>
    <button class="clear" onclick="clearTable()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
    <button class="print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
  </div>

  <table id="itemsTable">
  <thead>
    <tr>
      <th>Ù…</th>
      <th>Ø§Ù„ØµÙ†Ù</th>
      <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
      <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
      <th id="th-supplier1">Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø£ÙˆÙ„</th>
      <th>Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
      <th id="th-supplier2">Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ</th>
      <th>Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
      <th id="th-supplier3">Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«</th>
      <th>Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
    </tr>
  </thead>
  <tbody></tbody>
  <tfoot>
    <tr>
      <td colspan="4">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td>
      <td id="total1">0</td>
      <td id="total1After">0</td>
      <td id="total2">0</td>
      <td id="total2After">0</td>
      <td id="total3">0</td>
      <td id="total3After">0</td>
    </tr>
  </tfoot>
</table>


  <div class="footer-inputs">
    <label>Ø§Ù„Ù…Ø®ØªØµ: <input type="text" id="officer"></label>
    <label>Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù…: <input type="text" id="head"></label>
    <label>ÙŠØ¹ØªÙ…Ø¯: <input type="text" id="approved"></label>
    <label>Ø§Ø³Ù… Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„Ø£ÙˆÙ„: <input type="text" id="committee1"></label>
    <label>Ø§Ø³Ù… Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„Ø«Ø§Ù†ÙŠ: <input type="text" id="committee2"></label>
    <label>Ø§Ø³Ù… Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„Ø«Ø§Ù„Ø«: <input type="text" id="committee3"></label>
  </div>
</div>

<script src="data.js"></script>
<script>
let rowCount=0;

// Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ ÙØ§Ø±Øº
function addEmptyRow(){
  rowCount++;
  const tbody=document.querySelector('#itemsTable tbody');
  const tr=document.createElement('tr');
  tr.innerHTML=`
    <td>${rowCount}</td>
    <td><input list="itemsList"></td>
    <td><input type="text"></td>
    <td><input type="number" value="0" oninput="updateRow(this)"></td>
    <td><input type="number" value="0" oninput="updateRow(this)"></td>
    <td>0</td>
    <td><input type="number" value="0" oninput="updateRow(this)"></td>
    <td>0</td>
    <td><input type="number" value="0" oninput="updateRow(this)"></td>
    <td>0</td>
    
    <td><button onclick="removeRow(this)">Ù…Ø³Ø­</button></td>
  `;
  tbody.appendChild(tr);
  updateTotals();
}

// Ø¥Ø²Ø§Ù„Ø© ØµÙ
function removeRow(btn){ btn.closest('tr').remove(); updateTotals(); }

// Ù…Ø³Ø­ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
function clearTable(){
  document.querySelector('#itemsTable tbody').innerHTML='';
  rowCount=0;
  updateTotals();
}

function updateRow(input, taxRate=0.15){
  const tr = input.closest('tr');
  const qty = parseFloat(tr.cells[3].querySelector('input').value) || 0;
  const price1 = parseFloat(tr.cells[4].querySelector('input').value) || 0;
  const price2 = parseFloat(tr.cells[6].querySelector('input').value) || 0;
  const price3 = parseFloat(tr.cells[8].querySelector('input').value) || 0;

  const after1 = (price1*(1 + taxRate)).toFixed(2);
  const after2 = (price2*(1 + taxRate)).toFixed(2);
  const after3 = (price3*(1 + taxRate)).toFixed(2);

  tr.cells[5].textContent = after1;
  tr.cells[7].textContent = after2;
  tr.cells[9].textContent = after3;

  updateTotals(taxRate);
}

function updateTotals(taxRate=0.15){
  let totals = [0,0,0,0,0,0]; // price1, after1, price2, after2, price3, after3

  document.querySelectorAll('#itemsTable tbody tr').forEach(tr=>{
    totals[0] += parseFloat(tr.cells[4].querySelector('input').value) || 0;
    totals[1] += parseFloat(tr.cells[5].textContent) || 0;
    totals[2] += parseFloat(tr.cells[6].querySelector('input').value) || 0;
    totals[3] += parseFloat(tr.cells[7].textContent) || 0;
    totals[4] += parseFloat(tr.cells[8].querySelector('input').value) || 0;
    totals[5] += parseFloat(tr.cells[9].textContent) || 0;
  });

  document.getElementById('total1').textContent = totals[0].toFixed(2);
  document.getElementById('total1After').textContent = totals[1].toFixed(2);
  document.getElementById('total2').textContent = totals[2].toFixed(2);
  document.getElementById('total2After').textContent = totals[3].toFixed(2);
  document.getElementById('total3').textContent = totals[4].toFixed(2);
  document.getElementById('total3After').textContent = totals[5].toFixed(2);

highlightMinPrices();

}

// ØªÙ…ÙŠÙŠØ² Ø£Ù‚Ù„ Ø³Ø¹Ø± Ù„ÙƒÙ„ Ù…ÙˆØ±Ø¯ (Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)
function highlightMinPrices() {
  // Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©
  const cols = [4, 6, 8]; // ÙÙ‡Ø±Ø³ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© 0-based: 5,7,9 ÙÙŠ Ø§Ù„Ù€ HTML
  cols.forEach((colIdx, i) => {
    const tds = Array.from(document.querySelectorAll(`#itemsTable tbody tr td:nth-child(${colIdx+1})`));
    // Ø¬Ù„Ø¨ Ù‚ÙŠÙ… Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù† input Ø¯Ø§Ø®Ù„ td
    const values = tds.map(td => parseFloat(td.querySelector('input')?.value) || 0);
    const minVal = Math.min(...values);
    // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ ØªÙ…ÙŠÙŠØ² Ø³Ø§Ø¨Ù‚
    tds.forEach(td => td.classList.remove('highlight'));
    // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø£Ù‚Ù„
    tds.forEach((td, idx) => {
      if(values[idx] === minVal) td.classList.add('highlight');
    });
  });
}


// ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† main
window.onload=function(){
  const savedData=localStorage.getItem('mainFormData');
  if(savedData){
    const data=JSON.parse(savedData);
    document.getElementById('orderDate').value=data.committeeDate||'';
    document.getElementById('officer').value=data.footer[0]||'';
    document.getElementById('head').value=data.footer[1]||'';
    document.getElementById('approved').value=data.footer[2]||'';
    document.getElementById('committee1').value=data.footer[3]||'';
    document.getElementById('committee2').value=data.footer[4]||'';
    document.getElementById('committee3').value=data.footer[5]||'';
    if(data.table) data.table.forEach(row=>{
      rowCount++;
      addRowFromMain(row);
    });
  }
};

// Ø¥Ø¶Ø§ÙØ© ØµÙ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† main
function addRowFromMain(row){
  const item=row[1]||'', unit=row[2]||'', qty=parseFloat(row[3]||0),
        price1=parseFloat(row[4]||0), price2=parseFloat(row[5]||0), price3=parseFloat(row[6]||0);
  const tbody=document.querySelector('#itemsTable tbody');
  const tr=document.createElement('tr');
  const tax=0.15;
  const after1=(price1*(1+tax)).toFixed(2);
  const after2=(price2*(1+tax)).toFixed(2);
  const after3=(price3*(1+tax)).toFixed(2);
  const totalBefore=((qty*price1)+(qty*price2)+(qty*price3)).toFixed(2);
  const totalAfter=((qty*after1)+(qty*after2)+(qty*after3)).toFixed(2);
  tr.innerHTML=`
    <td>${rowCount}</td>
    <td><input list="itemsList" value="${item}" readonly></td>
    <td><input type="text" value="${unit}" readonly></td>
    <td><input type="number" value="${qty}" readonly></td>
    <td><input type="number" value="${price1}" readonly></td>
    <td>${after1}</td>
    <td><input type="number" value="${price2}" readonly></td>
    <td>${after2}</td>
    <td><input type="number" value="${price3}" readonly></td>
    <td>${after3}</td>
    <td>${totalBefore}</td>
    <td>${totalAfter}</td>
    <td><button onclick="removeRow(this)">Ù…Ø³Ø­</button></td>
  `;
  tbody.appendChild(tr);
  updateTotals();
}
</script>

</body>
</html>
